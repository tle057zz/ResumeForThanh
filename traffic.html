<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta content="width=device-width, initial-scale=1.0" name="viewport">
  <title>Traffic Analytics - TLe Portfolio</title>
  <meta content="Website traffic analytics and statistics for thanhle.it.com" name="description">
  <meta content="analytics, traffic, statistics, website" name="keywords">

  <!-- Favicons -->
  <link href="assets/img/favicon.png" rel="icon">
  <link href="assets/img/apple-touch-icon.png" rel="apple-touch-icon">

  <!-- Fonts -->
  <link href="https://fonts.googleapis.com" rel="preconnect">
  <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Roboto:ital,wght@0,100;0,300;0,400;0,500;0,700;0,900;1,100;1,300;1,400;1,500;1,700;1,800;1,900&family=Poppins:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&family=Raleway:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&display=swap" rel="stylesheet">

  <!-- Vendor CSS Files -->
  <link href="assets/vendor/bootstrap/css/bootstrap.min.css" rel="stylesheet">
  <link href="assets/vendor/bootstrap-icons/bootstrap-icons.css" rel="stylesheet">
  <link href="assets/vendor/aos/aos.css" rel="stylesheet">

  <!-- Main CSS File -->
  <link href="assets/css/main.css" rel="stylesheet">

  <!-- Chart.js for Analytics -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

</head>

<body class="traffic-page">

  <header id="header" class="header d-flex flex-column justify-content-center">

    <div class="branding-logo text-center mb-3">
      <img src="assets/img/logobranding.png" alt="Brand Logo" style="max-width: 80px; height: auto;">
    </div>

    <i class="header-toggle d-xl-none bi bi-list"></i>

    <nav id="navmenu" class="navmenu">
      <ul>
        <li><a href="index.html#basic-intro"><i class="bi bi-info-circle navicon"></i><span>Basic Introductions</span></a></li>
        <li><a href="index.html"><i class="bi bi-house navicon"></i><span>Home</span></a></li>
        <li><a href="index.html#about"><i class="bi bi-person navicon"></i><span>About</span></a></li>
        <li><a href="index.html#resume"><i class="bi bi-file-earmark-text navicon"></i><span>Resume</span></a></li>
        <li><a href="index.html#portfolio"><i class="bi bi-images navicon"></i><span>Portfolio</span></a></li>
        <li><a href="index.html#professional-focus"><i class="bi bi-hdd-stack navicon"></i><span>Professional Focus</span></a></li>
        <li><a href="index.html#contact"><i class="bi bi-envelope navicon"></i><span>Contact</span></a></li>
        <li><a href="career-advice.html"><i class="bi bi-lightbulb navicon"></i><span>Career Advice</span></a></li>
        <li><a href="traffic.html" class="active"><i class="bi bi-graph-up navicon"></i><span>Traffic</span></a></li>
      </ul>
    </nav>

  </header>

  <main class="main">

    <!-- Hero Section -->
    <section id="hero" class="hero section light-background">
      <div class="container" data-aos="fade-up">
        <div class="row justify-content-center">
          <div class="col-lg-9 text-center">
            <h2>Website Traffic Analytics</h2>
            <p>Real-time analytics and insights for <strong>thanhle.it.com</strong></p>
            <div class="alert alert-info">
              <i class="bi bi-info-circle me-2"></i>
              <strong>Note:</strong> This page displays sample analytics data. For real-time tracking, integrate with Google Analytics or similar services.
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- Analytics Overview Section -->
    <section id="analytics-overview" class="section">
      <div class="container" data-aos="fade-up">
        <div class="section-title">
          <h2>Analytics Overview</h2>
          <p>Key metrics and performance indicators for the website</p>
        </div>

        <div class="row gy-4">
          <!-- Total Visitors -->
          <div class="col-lg-3 col-md-6">
            <div class="card h-100">
              <div class="card-body text-center">
                <i class="bi bi-people-fill text-primary" style="font-size: 2rem;"></i>
                <h3 class="mt-3" id="total-visitors">1,247</h3>
                <p class="text-muted">Total Visitors</p>
                <small class="text-success"><i class="bi bi-arrow-up"></i> +12.5% this month</small>
              </div>
            </div>
          </div>

          <!-- Page Views -->
          <div class="col-lg-3 col-md-6">
            <div class="card h-100">
              <div class="card-body text-center">
                <i class="bi bi-eye-fill text-info" style="font-size: 2rem;"></i>
                <h3 class="mt-3" id="page-views">3,892</h3>
                <p class="text-muted">Page Views</p>
                <small class="text-success"><i class="bi bi-arrow-up"></i> +8.3% this month</small>
              </div>
            </div>
          </div>

          <!-- Bounce Rate -->
          <div class="col-lg-3 col-md-6">
            <div class="card h-100">
              <div class="card-body text-center">
                <i class="bi bi-arrow-repeat text-warning" style="font-size: 2rem;"></i>
                <h3 class="mt-3" id="bounce-rate">42.3%</h3>
                <p class="text-muted">Bounce Rate</p>
                <small class="text-danger"><i class="bi bi-arrow-down"></i> +2.1% this month</small>
              </div>
            </div>
          </div>

          <!-- Avg Session Duration -->
          <div class="col-lg-3 col-md-6">
            <div class="card h-100">
              <div class="card-body text-center">
                <i class="bi bi-clock-fill text-success" style="font-size: 2rem;"></i>
                <h3 class="mt-3" id="avg-session">2:34</h3>
                <p class="text-muted">Avg Session</p>
                <small class="text-success"><i class="bi bi-arrow-up"></i> +15.2% this month</small>
              </div>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- Traffic Charts Section -->
    <section id="traffic-charts" class="section">
      <div class="container" data-aos="fade-up">
        <div class="section-title">
          <h2>Traffic Analysis</h2>
          <p>Detailed traffic patterns and visitor behavior</p>
        </div>

        <div class="row gy-4">
          <!-- Daily Traffic Chart -->
          <div class="col-lg-8">
            <div class="card">
              <div class="card-header">
                <h5 class="card-title mb-0">Daily Traffic (Last 30 Days)</h5>
              </div>
              <div class="card-body">
                <canvas id="dailyTrafficChart" height="100"></canvas>
              </div>
            </div>
          </div>

          <!-- Traffic Sources -->
          <div class="col-lg-4">
            <div class="card">
              <div class="card-header">
                <h5 class="card-title mb-0">Traffic Sources</h5>
              </div>
              <div class="card-body">
                <canvas id="trafficSourcesChart"></canvas>
              </div>
            </div>
          </div>
        </div>

        <div class="row gy-4 mt-4">
          <!-- Page Performance -->
          <div class="col-lg-6">
            <div class="card">
              <div class="card-header">
                <h5 class="card-title mb-0">Top Pages</h5>
              </div>
              <div class="card-body">
                <canvas id="topPagesChart"></canvas>
              </div>
            </div>
          </div>

          <!-- Geographic Distribution -->
          <div class="col-lg-6">
            <div class="card">
              <div class="card-header">
                <h5 class="card-title mb-0">Geographic Distribution</h5>
              </div>
              <div class="card-body">
                <canvas id="geoChart"></canvas>
              </div>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- Device Analytics Section -->
    <section id="device-analytics" class="section">
      <div class="container" data-aos="fade-up">
        <div class="section-title">
          <h2>Device & Browser Analytics</h2>
          <p>Understanding how visitors access the website</p>
        </div>

        <div class="row gy-4">
          <!-- Device Types -->
          <div class="col-lg-6">
            <div class="card">
              <div class="card-header">
                <h5 class="card-title mb-0">Device Types</h5>
              </div>
              <div class="card-body">
                <canvas id="deviceChart"></canvas>
              </div>
            </div>
          </div>

          <!-- Browser Distribution -->
          <div class="col-lg-6">
            <div class="card">
              <div class="card-header">
                <h5 class="card-title mb-0">Browser Distribution</h5>
              </div>
              <div class="card-body">
                <canvas id="browserChart"></canvas>
              </div>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- Real-time Analytics Section -->
    <section id="realtime-analytics" class="section">
      <div class="container" data-aos="fade-up">
        <div class="section-title">
          <h2>Real-time Analytics</h2>
          <p>Live visitor activity and current session data</p>
        </div>

        <div class="row gy-4">
          <!-- Current Visitors -->
          <div class="col-lg-4">
            <div class="card">
              <div class="card-body text-center">
                <i class="bi bi-person-circle text-primary" style="font-size: 3rem;"></i>
                <h3 class="mt-3" id="current-visitors">8</h3>
                <p class="text-muted">Current Visitors</p>
                <div class="progress mt-2">
                  <div class="progress-bar" role="progressbar" style="width: 25%"></div>
                </div>
              </div>
            </div>
          </div>

          <!-- Active Sessions -->
          <div class="col-lg-4">
            <div class="card">
              <div class="card-body text-center">
                <i class="bi bi-activity text-success" style="font-size: 3rem;"></i>
                <h3 class="mt-3" id="active-sessions">12</h3>
                <p class="text-muted">Active Sessions</p>
                <div class="progress mt-2">
                  <div class="progress-bar bg-success" role="progressbar" style="width: 40%"></div>
                </div>
              </div>
            </div>
          </div>

          <!-- Page Views Today -->
          <div class="col-lg-4">
            <div class="card">
              <div class="card-body text-center">
                <i class="bi bi-graph-up text-info" style="font-size: 3rem;"></i>
                <h3 class="mt-3" id="today-views">156</h3>
                <p class="text-muted">Page Views Today</p>
                <div class="progress mt-2">
                  <div class="progress-bar bg-info" role="progressbar" style="width: 60%"></div>
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- Live Activity Feed -->
        <div class="row mt-4">
          <div class="col-12">
            <div class="card">
              <div class="card-header">
                <h5 class="card-title mb-0">Live Activity Feed</h5>
              </div>
              <div class="card-body">
                <div id="activity-feed" class="activity-feed">
                  <div class="activity-item">
                    <span class="time">2:34 PM</span>
                    <span class="activity">Visitor from Sydney, Australia viewed Home page</span>
                  </div>
                  <div class="activity-item">
                    <span class="time">2:31 PM</span>
                    <span class="activity">Visitor from Melbourne, Australia viewed Portfolio section</span>
                  </div>
                  <div class="activity-item">
                    <span class="time">2:28 PM</span>
                    <span class="activity">Visitor from Brisbane, Australia viewed About section</span>
                  </div>
                  <div class="activity-item">
                    <span class="time">2:25 PM</span>
                    <span class="activity">Visitor from Perth, Australia viewed Contact page</span>
                  </div>
                  <div class="activity-item">
                    <span class="time">2:22 PM</span>
                    <span class="activity">Visitor from Adelaide, Australia viewed Resume section</span>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </section>

  </main>

  <footer id="footer" class="footer position-relative light-background">
    <div class="container">
      <h3 class="sitename">Thanh Le</h3>
      <p>Postgraduate Student | Seeking opportunities in Data Science, Analytics & Engineering</p>
      <div class="social-links d-flex justify-content-center">
        <a href="https://linkedin.com/in/tle057/" target="_blank"><i class="bi bi-linkedin"></i></a>
        <a href="mailto:lenhothanh.nsl@gmail.com"><i class="bi bi-envelope"></i></a>
        <a href="tel:0432813909"><i class="bi bi-telephone"></i></a>
      </div>
      <div class="container">
        <div class="copyright">
          <span>Copyright</span> <strong class="px-1 sitename">Thanh Le</strong> <span>All Rights Reserved</span>
        </div>
      </div>
    </div>
  </footer>

  <!-- Scroll Top -->
  <a href="#" id="scroll-top" class="scroll-top d-flex align-items-center justify-content-center"><i class="bi bi-arrow-up-short"></i></a>

  <!-- Preloader -->
  <div id="preloader"></div>

  <!-- Vendor JS Files -->
  <script src="assets/vendor/bootstrap/js/bootstrap.bundle.min.js"></script>
  <script src="assets/vendor/aos/aos.js"></script>

  <!-- Main JS File -->
  <script src="assets/js/main.js"></script>

  <!-- Analytics Charts Script -->
  <script>
    // Initialize AOS
    AOS.init();

    // Wait for page to load completely
    window.addEventListener('load', function() {
      console.log('Page loaded, creating charts...');
      
      // Fetch real visitor data from Flask API
      fetch('/api/visitor-stats')
        .then(response => response.json())
        .then(data => {
          console.log('Visitor stats:', data);
          updateDashboard(data);
          createCharts(data);
        })
        .catch(error => {
          console.error('Error fetching visitor stats:', error);
          // Fallback to sample data if API fails
          createChartsWithSampleData();
        });
    });

    function updateDashboard(data) {
      // Update overview cards with real data
      document.getElementById('total-visitors').textContent = data.total_visitors || 0;
      document.getElementById('page-views').textContent = Object.values(data.page_views || {}).reduce((a, b) => a + b, 0);
      document.getElementById('current-visitors').textContent = data.today_visitors || 0;
      
      // Update activity feed with real data
      const activityFeed = document.getElementById('activity-feed');
      if (data.recent_activity && data.recent_activity.length > 0) {
        activityFeed.innerHTML = '';
        data.recent_activity.forEach(activity => {
          const time = new Date(activity[2]).toLocaleTimeString();
          const page = activity[1] || 'Unknown page';
          const ip = activity[0] || 'Unknown IP';
          
          const activityItem = document.createElement('div');
          activityItem.className = 'activity-item';
          activityItem.innerHTML = `
            <span class="time">${time}</span>
            <span class="activity">Visitor from ${ip} viewed ${page}</span>
          `;
          activityFeed.appendChild(activityItem);
        });
      }
    }

    function createCharts(data) {
      // Create charts with real data
      const pageViews = data.page_views || {};
      const pageNames = Object.keys(pageViews);
      const pageCounts = Object.values(pageViews);
      
      // Daily Traffic Chart (simulated for now, could be enhanced with real daily data)
      const dailyTrafficData = {
        labels: ['Jan 1', 'Jan 2', 'Jan 3', 'Jan 4', 'Jan 5', 'Jan 6', 'Jan 7', 'Jan 8', 'Jan 9', 'Jan 10', 'Jan 11', 'Jan 12', 'Jan 13', 'Jan 14', 'Jan 15', 'Jan 16', 'Jan 17', 'Jan 18', 'Jan 19', 'Jan 20', 'Jan 21', 'Jan 22', 'Jan 23', 'Jan 24', 'Jan 25', 'Jan 26', 'Jan 27', 'Jan 28', 'Jan 29', 'Jan 30'],
        datasets: [{
          label: 'Visitors',
          data: [45, 52, 38, 67, 58, 72, 65, 78, 82, 75, 89, 91, 85, 79, 88, 94, 87, 92, 96, 89, 93, 97, 91, 88, 95, 98, 92, 89, 96, 99],
          borderColor: 'rgb(75, 192, 192)',
          backgroundColor: 'rgba(75, 192, 192, 0.2)',
          tension: 0.4
        }]
      };

      const trafficSourcesData = {
        labels: ['Direct', 'Organic Search', 'Social Media', 'Referral', 'Email'],
        datasets: [{
          data: [35, 40, 15, 8, 2],
          backgroundColor: [
            '#FF6384',
            '#36A2EB',
            '#FFCE56',
            '#4BC0C0',
            '#9966FF'
          ]
        }]
      };

      const topPagesData = {
        labels: pageNames,
        datasets: [{
          label: 'Page Views',
          data: pageCounts,
          backgroundColor: [
            'rgba(255, 99, 132, 0.8)',
            'rgba(54, 162, 235, 0.8)',
            'rgba(255, 206, 86, 0.8)',
            'rgba(75, 192, 192, 0.8)',
            'rgba(153, 102, 255, 0.8)',
            'rgba(255, 159, 64, 0.8)',
            'rgba(199, 199, 199, 0.8)'
          ]
        }]
      };

      const geoData = {
        labels: ['Australia', 'United States', 'United Kingdom', 'Canada', 'Germany', 'Others'],
        datasets: [{
          data: [65, 15, 8, 6, 4, 2],
          backgroundColor: [
            '#FF6384',
            '#36A2EB',
            '#FFCE56',
            '#4BC0C0',
            '#9966FF',
            '#FF9F40'
          ]
        }]
      };

      const deviceData = {
        labels: ['Desktop', 'Mobile', 'Tablet'],
        datasets: [{
          data: [55, 40, 5],
          backgroundColor: [
            '#FF6384',
            '#36A2EB',
            '#FFCE56'
          ]
        }]
      };

      const browserData = {
        labels: ['Chrome', 'Safari', 'Firefox', 'Edge', 'Others'],
        datasets: [{
          data: [45, 25, 15, 10, 5],
          backgroundColor: [
            '#FF6384',
            '#36A2EB',
            '#FFCE56',
            '#4BC0C0',
            '#9966FF'
          ]
        }]
      };

      // Create charts
      try {
        // Daily Traffic Chart
        new Chart(document.getElementById('dailyTrafficChart'), {
          type: 'line',
          data: dailyTrafficData,
          options: {
            responsive: true,
            maintainAspectRatio: false,
            plugins: {
              legend: {
                display: false
              }
            },
            scales: {
              y: {
                beginAtZero: true
              }
            }
          }
        });

        // Traffic Sources Chart
        new Chart(document.getElementById('trafficSourcesChart'), {
          type: 'doughnut',
          data: trafficSourcesData,
          options: {
            responsive: true,
            maintainAspectRatio: false,
            plugins: {
              legend: {
                position: 'bottom'
              }
            }
          }
        });

        // Top Pages Chart
        new Chart(document.getElementById('topPagesChart'), {
          type: 'bar',
          data: topPagesData,
          options: {
            responsive: true,
            maintainAspectRatio: false,
            plugins: {
              legend: {
                display: false
              }
            },
            scales: {
              y: {
                beginAtZero: true
              }
            }
          }
        });

        // Geographic Distribution Chart
        new Chart(document.getElementById('geoChart'), {
          type: 'doughnut',
          data: geoData,
          options: {
            responsive: true,
            maintainAspectRatio: false,
            plugins: {
              legend: {
                position: 'bottom'
              }
            }
          }
        });

        // Device Types Chart
        new Chart(document.getElementById('deviceChart'), {
          type: 'pie',
          data: deviceData,
          options: {
            responsive: true,
            maintainAspectRatio: false,
            plugins: {
              legend: {
                position: 'bottom'
              }
            }
          }
        });

        // Browser Distribution Chart
        new Chart(document.getElementById('browserChart'), {
          type: 'pie',
          data: browserData,
          options: {
            responsive: true,
            maintainAspectRatio: false,
            plugins: {
              legend: {
                position: 'bottom'
              }
            }
          }
        });

        console.log('All charts created successfully!');
      } catch (error) {
        console.error('Error creating charts:', error);
      }
    }

    function createChartsWithSampleData() {
      // Fallback function with sample data
      console.log('Using sample data for charts');
      
      const sampleData = {
        total_visitors: 1247,
        unique_visitors: 892,
        today_visitors: 156,
        page_views: {
          'home': 892,
          'about': 456,
          'portfolio': 234,
          'resume': 189,
          'contact': 121,
          'career-advice': 89,
          'traffic': 67
        }
      };
      
      updateDashboard(sampleData);
      createCharts(sampleData);
    }

    // Simulate real-time updates
    setInterval(function() {
      const currentVisitors = document.getElementById('current-visitors');
      const visitors = Math.floor(Math.random() * 15) + 5;
      currentVisitors.textContent = visitors;
      
      const activeSessions = document.getElementById('active-sessions');
      const sessions = Math.floor(Math.random() * 20) + 8;
      activeSessions.textContent = sessions;
      
      const todayViews = document.getElementById('today-views');
      const views = parseInt(todayViews.textContent) + Math.floor(Math.random() * 3);
      todayViews.textContent = views;
    }, 5000);
  </script>

  <style>
    .activity-feed {
      max-height: 300px;
      overflow-y: auto;
    }
    
    .activity-item {
      padding: 10px 0;
      border-bottom: 1px solid #eee;
      display: flex;
      align-items: center;
    }
    
    .activity-item:last-child {
      border-bottom: none;
    }
    
    .time {
      font-weight: bold;
      color: #666;
      min-width: 80px;
      margin-right: 15px;
    }
    
    .activity {
      color: #333;
    }
    
    .card {
      box-shadow: 0 0.125rem 0.25rem rgba(0, 0, 0, 0.075);
      border: 1px solid rgba(0, 0, 0, 0.125);
    }
    
    .card-header {
      background-color: #f8f9fa;
      border-bottom: 1px solid rgba(0, 0, 0, 0.125);
    }
  </style>

</body>

</html> 